<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="./../../dist/css/style.css">
        <link rel="stylesheet" href="./../../dist/css/sms.css">

        <link rel="stylesheet" href="./../../dist/css/modal.css">
        <link rel="stylesheet" href="./../../dist/css/clientes.css">
        <link rel="stylesheet" href="./../../dist/css/send_sms.css">

        <script src="./../js/jquery.js"></script>

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800&display=swap"
            rel="stylesheet">

        <script src="../js/jquery.js"></script>
        <script src="../../components/loader/loader.js"></script>
        <script src="../../components/notificacao/notificacao.js"></script>
        <script src="../_request/Sms.js"></script>
        <title>Enviar mensagem</title>

        <style> 
        picture {
            display: flex;
            justify-content: flex-end;
            cursor: pointer;
            margin-right: 5px;
        }

        .modal {
            width: 88%;
            height: 553px;
        }
    </style>

    </head>
    <body class="container-menu">
       
        <main class="main close-content">
            
            <section class="sms-section">
                <a href="sms.html"><img src="../icon/back.svg" alt="" style="display: block;width: 30px;float: left;"></a>
                <button class="reenviar-btn modal-reenviar" id="sms-create-list" style="background-color: #ffff00;">
                    ENVIAR SMS
                </button>

                <button class="sms-section-btn modal-send" id="sms-target">
                    DESTINATÁRIO
                </button>
            </section>

            <!-- agendar button -->
            <button class="agendar-btn modal-agendar" style="float:right;margin-bottom:35px;">AGENDAR</button>
                        <br>
            <!-- agendar modal -->
            <div id="myModal-agendar" class="modal"
                style="width: 80%; height: 260px; border-radius: 5px; top: 280px;">
                <div class="modal-content">

                    <div class="modal-box-content client-modal">

                        <section class="modal-box-section">
                            <form class="agendar-form" id="agendar">

                                <label for="date"
                                    class="label-date">DATA</label>

                                <section class="section-agendar">
                                    <input type="date" id="date"
                                        class="agendar-date" required>
                                        <label for="date">
                                    <img src="../../assets/calendar.svg"
                                        alt="date icon"></label>

                                </section>

                                <label for="hour">HORA</label>

                                <section class="section-agendar">
                                    <input type="time" id="hour"
                                        class="agendar-hour" required>
                                    <label for="hour"><img src="../../assets/clock.svg"
                                        alt="hour icon"></label>
                                </section>

                                <div class="button-agendar">
                                    <button type="button"
                                        class="agendar-yes" onclick="RequestSms.agendar()">AGENDAR</button>
                                    <div class="close-agendar">NÃO</button>
                                </div>

                            </form>

                        </section>

                    </div>
                </div>
            </div>

            <div id="myOverlay-agendar" class="overlay"></div>

            <div class="sms__box">

                <select name="select" required id="remetentes" style="border-radius: 3px;background: #D9D9D9;box-shadow: 1px 1px 1px black;">
                </select>
            </div>

            <textarea name="text" class="sms-textarea" cols="30" rows="10" id="mensagem"
                placeholder="A sua mensagem aqui. (Tamanho máximo de 160 caracteres)"
                style="" maxlength="180"></textarea>

            <!-- first modal -->
            <div id="myModal" class="modal">
                <div class="modal-content">
                    <picture>
                        <img src="../img/circle-check-solid-red.png" 
                            id="icon-confirmed" class="close" style="width: 30px;height: 30px;">

                    </picture>

                    <div class="modal-box-content client-modal">
                        <br>
                        <h3 class="ativa-smslist" style="padding: 10px;box-shadow: 1px 1px 1px black;background-color: #ffff00;">LISTAS DE ENVIO</h3>
                        <input type="hidden" id="store-listas" value="[]">
                        <section class="modal-box-section sms-list" style="overflow-y: auto;max-height:55vh;justify-content: normal;margin-bottom: 20px;display: none;">
                
                        </section>
                        
                        <h3 style="margin-top:15px;padding: 10px;box-shadow: 1px 1px 1px black;background-color: #ffff00;" class="ativa-contactos">CONTACTOS</h3>
                        <input type="hidden" id="store-contactos" value="[]">
                        <section class="modal-box-section contactos" style="overflow-y: auto;max-height:55vh;justify-content: normal;display: none;">   

                        </section>

                    </div>
                </div>
            </div>

            <div id="myOverlay" class="overlay"></div>


            

            <!-- reenviar modal -->
            <div id="myModal-reenviar" class="modal"
                style="width: 80%; height: 260px; border-radius: 5px; top: 280px;">
                <div class="modal-content">

                    <div class="modal-box-content reenviar-modal">

                        <section class="modal-box-section">
                            <form class="reenviar-form" id="reenviar">

                                <label for="date"
                                    class="label-date pergunta-modal">ENVIAR ?</label>
                                <div class="button-reenviar">
                                    <div class="reenviar-yes btn-modal" style="text-align: center;background-color: #ffff00;" onclick="RequestSms.enviar()">SIM</div>
                                    <div class="close-reenviar btn-modal" style="text-align: center;background-color: #00ff00;">NÃO</div>
                                </div>

                            </form>

                        </section>

                    </div>
                </div>
            </div>

            <div id="myOverlay-reenviar" class="overlay"></div>
            <!-- -->
        </main>

    </body>
    <script src="../js/agendarModal.js"></script>
    <script src="../js/menu.js"></script>
    <script src="../js/cliente.js"></script>
    <script src="../js/reenviarModal.js"></script>
    <script>
        men();
        banner("nova mensagem");
bg();
         var token = localStorage.getItem("token");

        if(!token){ 
            location.href = "../../index.html";
        }else{
            
        }

        var notificacao = new debliwuinotificacao();
        var loader = new debliwuiloader();
        document.querySelector("body").append(notificacao);
        document.querySelector("body").append(loader);
        var RequestSms = new Sms($, loader, notificacao);
        RequestSms.listas();
        RequestSms.clientes();

        document.getElementById('agendar').addEventListener('submit', function (event) {                        
            event.preventDefault();

            RequestSms.alterar(chave);

        });

        //--------
        var remetentes = JSON.parse(localStorage.getItem("remetentes"));
        var remetentesHtml = "";
        (remetentes).forEach(element => {
            remetentesHtml += `<option value="${(element.name)}">${(element.name)}</option>`;
        });        
        document.querySelector("#remetentes").innerHTML = remetentesHtml;    



        $(".ativa-smslist").click(function(){
            
            if($(".sms-list")[0].style.display == "none"){
                $(".sms-list")[0].style.display = "flex";
            }
            else if($(".sms-list")[0].style.display == "flex"){
                $(".sms-list")[0].style.display = "none";
            }
        });

        $(".ativa-contactos").click(function(){
            
            if($(".contactos")[0].style.display == "none"){
                $(".contactos")[0].style.display = "flex";
            }
            else if($(".contactos")[0].style.display == "flex"){
                $(".contactos")[0].style.display = "none";
            }
        });
</script>

</html>